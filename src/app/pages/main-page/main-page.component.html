<app-loader></app-loader>

<div class="main-page">
	<div class="main-page__container">
		<div class="main-page__inner">
			<div media-query-watcher
			     query="(min-width: 992px)"
			     (mediaMatchChanged)="handleChangeToDesctop($event)">
				<div *ngIf="desctopMediaQuery">
					<app-soc></app-soc>
				</div>
			</div>
			
			<app-next-section-link></app-next-section-link>
		</div>
	</div>
	
	
	<div fullpage id="fullpage" [options]="config" (ref)="getRef($event)">
		<div class="section fp-auto-height-responsive">
			
			<div class="main-section__bg">
				<app-fake3d
					[image]="'assets/images/main.jpg'"
					[depf]="'assets/images/main-map.jpg'"
					[horizontalThreshold]="35"
					[verticalThreshold]="15">
				</app-fake3d>
			</div>
			
			<div class="main-section">
				<div class="main-section__title text-center" #mainTitle>
					Флористика<br>
					с душой
				</div>
				<button class="btn main-section__btn" #mainBtn>Cмотреть работы</button>
				
				<div media-query-watcher
				     query="(max-width: 992px)"
				     (mediaMatchChanged)="handleChangeToTablet($event)">
					<div *ngIf="tabletMediaQuery">
						<app-soc></app-soc>
					</div>
				</div>
				
				<div class="main-section__mouse" #mouse>
					<app-mouse></app-mouse>
				</div>
			</div>
		</div>
		
		<div class="section fp-auto-height-responsive">
			<div class="section__title text-center">
				Каталог услуг
			</div>
			<app-catalog *ngIf="posts$ | async as posts; else loading" [posts]="posts"></app-catalog>
			
			<ng-template #loading>
				<p>Загрузка...</p>
			</ng-template>
		</div>
		
		<div class="section fp-auto-height-responsive">
			<app-actions></app-actions>
		</div>
		
		<div class="section fp-auto-height">
			<app-footer></app-footer>
		</div>
	</div>
</div>
